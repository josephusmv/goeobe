<!DOCTYPE html>
<html lang="en">
    <head>
    {{template "htmlhead"}}
    </head>
    
    <body class="fixed-nav sticky-footer bg" id="page-top">
        {{template "sidenavi"}}
  
  <!-- Main Content -->
  <div class="content-wrapper">
    <div class="container-fluid">
      
      <!-- one cards row: 1st row -->
      <div class="row">
           <!-- column, each column has one card -->
          <div class="col-xl-6 col-sm-12 mb-3">          
            <!-- one card -->
            <div class="card bg-light text-primary">
                <div class="card-header">
                  DB Info
                </div>
                <ul class="list-group list-group-flush">
                  <li class="list-group-item w-100" >
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                            <span class="input-group-text" id="inputGroup-sizing-default"  style="width:7rem">DB type:</span>
                          </div>
                          <input type="text" class="form-control" 
                                 placeholder="root:123456@/MYDATABASE"
                                 aria-label="Default" 
                                 aria-describedby="inputGroup-sizing-default" value="mysql" disabled="true">
                        </div>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                            <span class="input-group-text" id="inputGroup-sizing-default" style="width:7rem">DB conn str:</span>
                          </div>
                          <input type="text" class="form-control" 
                                 placeholder="root:123456@/MYDATABASE"
                                 aria-label="Default" 
                                 aria-describedby="inputGroup-sizing-default">
                        </div>
                  </li>
                </ul>
            </div><!-- card -->
          </div> <!-- column, each column has one card -->
          
           <!-- column, each column has one card -->
          <div class="col-xl-6 col-sm-12 mb-3">
            <!-- one card -->
            <div class="card bg-light text-primary">
                <div class="card-header">
                  Path Info
                </div>
                <ul class="list-group list-group-flush">
                  <li class="list-group-item w-100" >
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                            <span class="input-group-text" id="inputGroup-sizing-default"  style="width:7rem">Root Folder:</span>
                          </div>
                          <input type="text" class="form-control" 
                                 placeholder="./"
                                 aria-label="Default" 
                                 aria-describedby="inputGroup-sizing-default">
                        </div>
                        <div class="input-group mb-3">
                          <div class="input-group-prepend">
                            <span class="input-group-text" id="inputGroup-sizing-default" style="width:7rem">LOG Folder:</span>
                          </div>
                          <input type="text" class="form-control" 
                                 placeholder="./RES/LOGS"
                                 aria-label="Default" 
                                 aria-describedby="inputGroup-sizing-default">
                        </div>
                  </li>
                </ul>
            </div><!-- card -->   
          </div><!-- column, each column has one card -->
          
      </div>   <!-- one cards row -->
      
      
      <!-- one cards row: enable Debug Log -->
      <div class="row">          
           <!-- column, each column has one card -->
          <div class="col-xl-12 col-sm-12 mb-3">          
            <!-- one card -->
            <div class="card bg-light text-primary">   
                <div class="card-header">
                  Debugging
                </div>
                <ul class="list-group list-group-flush">
                  <li class="list-group-item w-100" >
                    <div class="input-group" style="height: 2.9em">
                        <div class="input-group-prepend">
                            <label class="input-group-text" for="inputGroupSelect01" style="width:15rem">Enable debug log:</label>
                        </div>
                        <select class="custom-select" id="inputGroupSelect01"  style="height: 2.9em">
                            <option value="1">No</option>
                            <option value="2">Yes</option>
                        </select>
                    </div>
                  </li>
                </ul>          
            </div><!-- card -->
          </div> <!-- column, each column has one card -->          
      </div> <!-- one cards row: enable Debug Log -->
          
      
      <!-- one cards row: Modules -->
      <div class="row">
          <div class="col-xl-12 col-sm-12 mb-3">
            <!-- one card -->
            <div class="card bg-light text-primary">
                <div class="card-header">
                  Modules
                </div>
                
                <!-- root module name -->
                <ul class="list-group list-group-flush">
                  <li class="list-group-item w-100" > 
                    <div class="row">
                        <div class="col-xl-5 col-sm-12 mr-3">
                            <div class="input-group">
                              <div class="input-group-prepend">
                                <span class="input-group-text" id="inputGroup-sizing-default" style="width:9rem">Root Module:</span>
                              </div>
                              <input type="text" class="form-control" 
                                     placeholder="root module name"
                                     aria-label="Default" 
                                     aria-describedby="inputGroup-sizing-default">
                            </div>
                        </div>
                    </div>                      
                  </li> <!-- root module name -->
                  
                  <!-- Module List Table -->
                  <li class="list-group-item w-100" >
                          <div class="table-responsive">
                            <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                              <tbody id="tmpltFileTBody" >   
                                  
                                <tr id="trFileRow0"   style="border: 0 transparent">
                                    <td  style="border: 0;">
                                        <div class="row">
                                            <div class="col-xl-3 col-sm-12 mb-3">                                      
                                                <input id="moduleNameElem"
                                                       type="text" class="form-control" 
                                                       placeholder="module name"
                                                       aria-label="module name"
                                                       aria-describedby="basic-addon2" style="height: 2.5em">
                                            </div>
                                            <div class="col-xl-9 col-sm-12 mb-3">
                                                <div class="input-group">
                                                  <input type="text" class="form-control" 
                                                         placeholder="Index Action Name" 
                                                         aria-label="Index Action Name" 
                                                         aria-describedby="basic-addon2" style="height: 2.5em">
                                                  <div class="input-group-append">
                                                    <a class="nav-link ml-2 mr-1" href="javascript:void(0);" onclick="addNewRows();" style="font-size: 2em; padding: 0">
                                                        <i class="fas fa-plus-square"></i>
                                                    </a>
                                                     <a class="nav-link ml-1 mr-1 minus" href="javascript:void(0);" onclick="removeNewRows('trFileRow0');" style="font-size: 2em; padding: 0">
                                                        <i class="fas fa-minus-square"></i>
                                                     </a>
                                                  </div>
                                                </div>
                                            </div>
                                        </div> <!-- div class="row" -->
                                    </td>
                                </tr> <!-- trFileRow0 -->

                              </tbody>
                            </table>
                          </div>
                  </li><!-- Module List Table -->
                </ul>
            </div> <!-- one card -->
        </div> 
      </div> <!-- one cards row: Modules -->
      
      
      <!-- one cards row: Save button -->
      <div class="row mb-5 ml-3 mr-3">
        <a class="btn btn-primary w-100" href="javascript:void(0);" onclick="saveModulesClicked()" id="toggleSaveCfg">Save General Configurations</a>
      </div> <!-- one cards row: Modules -->
      
    
    <!-- /.content-wrapper-->
    <footer class="sticky-footer">
      <div class="container">
        <div class="text-center">
          <small>Copyright © Your Website 2018</small>
        </div>
      </div>
    </footer>
    
    </div>  <!-- /.container-fluid-->
  
    <!-- error Modal-->
    <div class="modal fade" id="errorDialogModal" tabindex="-1" role="dialog" aria-labelledby="errorDialogModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title" id="errorDialogModalLabel"> Error </h4>
            <button class="close" type="button" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">×</span>
            </button>
          </div>
            <div class="modal-body">
                <span id="errorDialogModalErrorMsg"></span>
            </div>
          <div class="modal-footer">
            <button class="btn btn-primary" type="button" data-dismiss="modal">dismiss</button>
          </div>
        </div>
      </div>
    </div><!-- error Modal-->
    
  </div>
  <!-- Main Content -->
    
    {{template "aboutmodal"}}
    {{template "delayload"}}
    
    <!-- script for this index.html file -->    
    <script>
        $(document).ready(function(){
            $('#collapseConfigurations').collapse('hide');
            initModuleNaviLinks();
        })
    </script><!-- script for this index.html file -->
    
    <script>        
        var lastIndex = 1;
        function addNewRows(){
            lastIndex++;
            var newTr = $("#trFileRow0").clone();
            var newTrID = "trFileRow" + lastIndex;
            newTr.attr("id", newTrID);
            var removeFunc = "removeNewRows('"+ newTrID + "');"
            newTr.find(".minus").attr("onclick", removeFunc);
            newTr.appendTo("#tmpltFileTBody");
        }
        
        function removeNewRows(trId){
            if(trId=="trFileRow0"){
                var errMsgStr = "Cannot remove this first row.<br/> The root module should be put here."
                $('#errorDialogModal').find("#errorDialogModalErrorMsg").html(errMsgStr);
                $('#errorDialogModal').modal('toggle');
                return;
            }
            $("#"+trId).remove();
        }
        
        function saveModulesClicked(){
            var moduleNameArray = [];
            var i = 0;
            $('#tmpltFileTBody').children('tr').each(function () {                
               moduleNameArray[i] = $(this).find("#moduleNameElem").val();
               i++;
            });
            console.log(moduleNameArray);
            updateModules(moduleNameArray);
        }
    </script><!--   $(document).ready -->
    
   
     
  </body> <!--End of body -->

</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Standard Meta -->
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" href="/common/css/bootstrap.min.css">
    <link rel="stylesheet" href="/common/css/font-awesome.min.css">
    <link rel="stylesheet" href="/common/css/font-awesome.min.6.4.1.css">
    <script src="/common/js/jquery-3.2.1.min.js"></script>
    <script src="/common/js/bootstrap.min.js"></script> 
    <!-- Site Properties -->
    <title>Bootstrap 4 Login Form</title>
    <style>
        body{
            background-color: black;
        }
        * {
            color: whitesmoke;
        }
        
        .icon-cog {
            color: black;
        }
    </style>
</head>
<body>
        <div class="container" style="margin-top:15em;">
        <div class="form-horizontal">
            <div class="row">
                <div class="col-md-3"></div>
                <div class="col-md-6">
                     <p class="logintitle" style="font-size:2em;">
                         <img id="leafnotesimgsm" src="/common/img/greenleaf1_md.png" align="middle"> 
                         Leaf Notes
                     </p>                 
                </div>
            </div>
            <div class="row">
                <div class="col-md-3"></div>
                <div class="col-md-6">
                    <div class="form-group has-danger">
                        <label class="sr-only" for="email">E-Mail Address</label>
                        <div class="input-group mb-2 mr-sm-2 mb-sm-0">
                            <div class="input-group-addon" style="width: 2.6rem"><i class="fa fa-at icon-cog"></i></div>
                            <input id="username" type="text" name="username" class="form-control" id="email"
                                   placeholder="you@example.com" required autofocus value="sadmin">
                        </div>
                    </div>
                </div>
                
                <div id="errormsgdiv" class="col-md-3" hidden="true">
                    <div class="form-control-feedback">
                        <span id="errormsgtext" class="text-danger align-middle" hidden="true">
                            <i class="fa fa-close"></i> Example error message
                        </span>
                    </div>
                </div> <!-- errormsgdiv -->
                
            </div>
            <div class="row">
                <div class="col-md-3"></div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="sr-only" for="password">Password</label>
                        <div class="input-group mb-2 mr-sm-2 mb-sm-0">
                            <div class="input-group-addon" style="width: 2.6rem"><i class="fa fa-key icon-cog"></i></div>
                            <input type="password" name="password" class="form-control" id="password" 
                                   placeholder="Password" required value="superadmin">
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-control-feedback">
                        <span class="text-danger align-middle">
                        <!-- Put password error message here -->    
                        </span>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-3"></div>
                <div class="col-md-4" style="padding-top: .35rem">
                    <div class="form-check mb-2 mr-sm-2 mb-sm-0">
                        <label class="form-check-label">
                            <input id="expire7Days" class="form-check-input" name="remember"
                                   type="checkbox" >
                            <span style="padding-bottom: .15rem">Remember me for one week</span>
                        </label>
                    </div>
                </div>
            </div>
            
            <div align="center" style="padding-top: 3em;">
                <button id="doLoginBtn" class="btn btn-lg btn-success" style="cursor:pointer;">
                    <i class="fa fa-sign-in"></i> 
                    Login 
                </button>
            </div>
            <div align="center" style="padding-top: 3em;">
                <a>Forgot Your Password?</a>
            </div>
        </div>
    </div>
    
    <script src="/common/js/useroprs.js"></script>
    <script>
    $(document).ready(function(){
        GetLoginUser(keepInLoginPage, redirectToMainPage);
    });
    
    function keepInLoginPage(){        
        $("#doLoginBtn").click(function(){
            var expireDays = 1;
            if ($("#expire7Days").prop("checked")) {
                expireDays = 7;
            }
            
            DoLoginUser($("#username"), $("#password"), expireDays, validLogin, errorLogin);
        });
    }
    
    function validLogin(userName){
        if(userName == null || typeof(userName) == undefined || userName.length <= 0 ){
            errorLogin();
            return;
        }
        redirectToMainPage();
    }
    
    function errorLogin(){
        alert("Login failed!!");
    }
    
    function redirectToMainPage(){
        window.location.replace("/GetMainPage");
    }
    </script>
</body>
</html>